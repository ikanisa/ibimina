# Cloudflare Pages Environment Variables Template
# 
# Instructions:
# 1. Generate all cryptographic secrets (see commands below)
# 2. Add these variables to Cloudflare Pages dashboard:
#    Dashboard → Pages → [Project] → Settings → Environment Variables
# 3. Add to both "Production" and "Preview" environments
#
# Generate secrets:
# export BACKUP_PEPPER=$(openssl rand -hex 32)
# export MFA_SESSION_SECRET=$(openssl rand -hex 32)
# export TRUSTED_COOKIE_SECRET=$(openssl rand -hex 32)
# export HMAC_SHARED_SECRET=$(openssl rand -hex 32)
# export KMS_DATA_KEY_BASE64=$(openssl rand -base64 32)
# export ANALYTICS_CACHE_TOKEN=$(openssl rand -hex 32)
# export REPORT_SIGNING_KEY=$(openssl rand -hex 32)
#
# For Web Push: npx web-push generate-vapid-keys

# ============================================================
# ADMIN APP ENVIRONMENT VARIABLES (adminsacco.ikanisa.com)
# ============================================================

# ----- Build Time Variables (required) -----
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1
APP_ENV=production

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Security Keys (generate with commands above)
BACKUP_PEPPER=your-backup-pepper-64-chars
MFA_SESSION_SECRET=your-mfa-session-secret-64-chars
TRUSTED_COOKIE_SECRET=your-trusted-cookie-secret-64-chars
HMAC_SHARED_SECRET=your-hmac-shared-secret-64-chars
KMS_DATA_KEY_BASE64=your-kms-data-key-base64-44-chars

# OpenAI API (optional but recommended)
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_RESPONSES_MODEL=gpt-4o-mini

# ----- Runtime Variables -----
# MFA/Authentication
MFA_RP_ID=adminsacco.ikanisa.com
MFA_ORIGIN=https://adminsacco.ikanisa.com
MFA_RP_NAME=SACCO+ Admin Console
MFA_EMAIL_FROM=security@ikanisa.com
MFA_EMAIL_LOCALE=en
MFA_SESSION_TTL_SECONDS=43200
TRUSTED_DEVICE_TTL_SECONDS=2592000

# Email Configuration
MAIL_FROM=SACCO+ <noreply@ikanisa.com>
RESEND_API_KEY=re_your-resend-api-key

# Analytics & Reporting (optional)
ANALYTICS_CACHE_TOKEN=your-analytics-cache-token-64-chars
REPORT_SIGNING_KEY=your-report-signing-key-64-chars

# Observability (optional)
LOG_DRAIN_URL=https://your-log-drain-endpoint.com
LOG_DRAIN_TOKEN=your-log-drain-token
LOG_DRAIN_SOURCE=admin-app
LOG_DRAIN_TIMEOUT_MS=2000
LOG_DRAIN_ALERT_WEBHOOK=https://your-alert-webhook.com
LOG_DRAIN_ALERT_COOLDOWN_MS=300000

# Site Configuration
SITE_URL=https://adminsacco.ikanisa.com
NEXT_PUBLIC_SITE_URL=https://adminsacco.ikanisa.com

# Build Metadata (optional)
NEXT_PUBLIC_BUILD_ID=${CF_PAGES_COMMIT_SHA}
GIT_COMMIT_SHA=${CF_PAGES_COMMIT_SHA}

# ============================================================
# STAFF APP ENVIRONMENT VARIABLES (saccostaff.ikanisa.com)
# ============================================================

# Same as Admin App above, but update these domain-specific values:
# MFA_RP_ID=saccostaff.ikanisa.com
# MFA_ORIGIN=https://saccostaff.ikanisa.com
# MFA_RP_NAME=SACCO+ Staff Console
# LOG_DRAIN_SOURCE=staff-app
# SITE_URL=https://saccostaff.ikanisa.com
# NEXT_PUBLIC_SITE_URL=https://saccostaff.ikanisa.com

# ============================================================
# CLIENT APP ENVIRONMENT VARIABLES (sacco.ikanisa.com)
# ============================================================

# ----- Build Time Variables (required) -----
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1
APP_ENV=production

# Supabase Configuration (same as admin)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Security Keys (same as admin)
BACKUP_PEPPER=your-backup-pepper-64-chars
MFA_SESSION_SECRET=your-mfa-session-secret-64-chars
TRUSTED_COOKIE_SECRET=your-trusted-cookie-secret-64-chars
HMAC_SHARED_SECRET=your-hmac-shared-secret-64-chars
KMS_DATA_KEY_BASE64=your-kms-data-key-base64-44-chars

# Web Push Notifications (generate with: npx web-push generate-vapid-keys)
NEXT_PUBLIC_VAPID_PUBLIC_KEY=your-vapid-public-key
VAPID_PRIVATE_KEY=your-vapid-private-key
VAPID_SUBJECT=mailto:support@ikanisa.com

# Feature Flags
NEXT_PUBLIC_FEATURE_FLAG_WEB_PUSH=true
NEXT_PUBLIC_FEATURE_FLAG_BETA_FEATURES=false

# OpenAI API (optional)
OPENAI_API_KEY=sk-your-openai-api-key

# MFA Configuration
MFA_RP_ID=sacco.ikanisa.com
MFA_ORIGIN=https://sacco.ikanisa.com
MFA_RP_NAME=SACCO+ Client
MFA_EMAIL_FROM=security@ikanisa.com
MFA_EMAIL_LOCALE=en

# Email Configuration
MAIL_FROM=SACCO+ <noreply@ikanisa.com>
RESEND_API_KEY=re_your-resend-api-key

# Observability (optional)
LOG_DRAIN_URL=https://your-log-drain-endpoint.com
LOG_DRAIN_TOKEN=your-log-drain-token
LOG_DRAIN_SOURCE=client-app

# Site Configuration
SITE_URL=https://sacco.ikanisa.com
NEXT_PUBLIC_SITE_URL=https://sacco.ikanisa.com

# Build Metadata (optional)
NEXT_PUBLIC_BUILD_ID=${CF_PAGES_COMMIT_SHA}
GIT_COMMIT_SHA=${CF_PAGES_COMMIT_SHA}

# ============================================================
# NOTES
# ============================================================
#
# 1. Cloudflare Pages automatically provides these variables:
#    - CF_PAGES=1
#    - CF_PAGES_BRANCH (main, develop, etc.)
#    - CF_PAGES_COMMIT_SHA
#    - CF_PAGES_URL (deployment URL)
#
# 2. For Preview deployments, create separate environment variables
#    or use CF_PAGES_BRANCH to conditionally set values
#
# 3. Never commit actual secret values to the repository
#
# 4. Rotate secrets regularly (at least every 90 days)
#
# 5. Use Cloudflare's "Encrypt" option for sensitive values
#
# 6. Test with preview deployments before promoting to production
#
# ============================================================

# Cloudflare Pages Environment Variables for Client App
# Domain: sacco.ikanisa.com
# Project: ibimina-client
#
# Instructions:
# 1. Generate all cryptographic secrets (see commands below)
# 2. Add these variables to Cloudflare Pages dashboard:
#    Dashboard → Pages → ibimina-client → Settings → Environment Variables
# 3. Add to both "Production" and "Preview" environments
#
# Generate secrets:
# export BACKUP_PEPPER=$(openssl rand -hex 32)
# export MFA_SESSION_SECRET=$(openssl rand -hex 32)
# export TRUSTED_COOKIE_SECRET=$(openssl rand -hex 32)
# export HMAC_SHARED_SECRET=$(openssl rand -hex 32)
# export KMS_DATA_KEY_BASE64=$(openssl rand -base64 32)
#
# For Web Push:
# npx web-push generate-vapid-keys

# ----- Build Time Variables (REQUIRED) -----
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1
APP_ENV=production

# Supabase Configuration (REQUIRED)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Security Keys (REQUIRED - generate with commands above)
BACKUP_PEPPER=your-backup-pepper-64-chars
MFA_SESSION_SECRET=your-mfa-session-secret-64-chars
TRUSTED_COOKIE_SECRET=your-trusted-cookie-secret-64-chars
HMAC_SHARED_SECRET=your-hmac-shared-secret-64-chars
KMS_DATA_KEY_BASE64=your-kms-data-key-base64-44-chars

# Web Push Notifications (REQUIRED - generate with: npx web-push generate-vapid-keys)
NEXT_PUBLIC_VAPID_PUBLIC_KEY=your-vapid-public-key
VAPID_PRIVATE_KEY=your-vapid-private-key
VAPID_SUBJECT=mailto:support@ikanisa.com

# ----- Runtime Variables -----
# Feature Flags
NEXT_PUBLIC_FEATURE_FLAG_WEB_PUSH=true
NEXT_PUBLIC_FEATURE_FLAG_BETA_FEATURES=false

# MFA/Authentication
MFA_RP_ID=sacco.ikanisa.com
MFA_ORIGIN=https://sacco.ikanisa.com
MFA_RP_NAME=SACCO+ Client
MFA_EMAIL_FROM=security@ikanisa.com
MFA_EMAIL_LOCALE=en

# Email Configuration
MAIL_FROM=SACCO+ <noreply@ikanisa.com>
RESEND_API_KEY=re_your-resend-api-key

# Observability (optional)
LOG_DRAIN_URL=https://your-log-drain-endpoint.com
LOG_DRAIN_TOKEN=your-log-drain-token
LOG_DRAIN_SOURCE=client-app
LOG_DRAIN_TIMEOUT_MS=2000

# Site Configuration
SITE_URL=https://sacco.ikanisa.com
NEXT_PUBLIC_SITE_URL=https://sacco.ikanisa.com

# Build Metadata (optional - auto-populated by Cloudflare)
NEXT_PUBLIC_BUILD_ID=${CF_PAGES_COMMIT_SHA}
GIT_COMMIT_SHA=${CF_PAGES_COMMIT_SHA}

# Sentry (optional - for error tracking)
SENTRY_DSN=https://your-sentry-dsn
NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn

# ============================================================
# CLIENT-SPECIFIC NOTES
# ============================================================
#
# 1. Client app does NOT need OPENAI_API_KEY (customer-facing only)
#
# 2. Web Push Notifications are required for real-time updates
#    - Generate VAPID keys with: npx web-push generate-vapid-keys
#    - Store private key securely (encrypted in Cloudflare)
#    - Public key is exposed via NEXT_PUBLIC_ prefix
#
# 3. Cloudflare Pages automatically provides:
#    - CF_PAGES=1
#    - CF_PAGES_BRANCH (main, develop, etc.)
#    - CF_PAGES_COMMIT_SHA
#    - CF_PAGES_URL (deployment URL)
#
# 4. For Preview deployments, you can use different values
#    or use CF_PAGES_BRANCH to conditionally set values
#
# 5. Never commit actual secret values to the repository
#
# 6. Use Cloudflare's "Encrypt" option for sensitive values
#
# 7. Test with preview deployments before production
#
# ============================================================

# ------------------------------------------------------------
# Public browser-safe configuration (NEXT_PUBLIC_*)
# ------------------------------------------------------------
# Supabase project URL exposed to the browser. Must match the project configured in Supabase dashboard.
NEXT_PUBLIC_SUPABASE_URL=
# Supabase anon/public key exposed to the browser for client-side queries (RLS must remain enabled).
NEXT_PUBLIC_SUPABASE_ANON_KEY=
# Optional: explicit site origin for passkey relying party overrides.
# NEXT_PUBLIC_SITE_URL=

# Build metadata injected by CI/hosting providers (no manual changes required).
# NEXT_PUBLIC_BUILD_ID=
# NEXT_PUBLIC_E2E=1

# ------------------------------------------------------------
# Server runtime secrets (Vercel / Next.js lambdas)
# ------------------------------------------------------------
# Runtime environment label (development, preview, production, etc.).
APP_ENV=development
# Optional region label for multi-region deploys.
# APP_REGION=
# Git commit SHA for health checks + diagnostics.
# GIT_COMMIT_SHA=
# Supabase service role key used for admin APIs, migrations, and background jobs.
SUPABASE_SERVICE_ROLE_KEY=
# Global pepper for MFA backup codes, rate limiting, and encryption fallbacks.
BACKUP_PEPPER=
# Secrets for signed MFA session + trusted device cookies.
MFA_SESSION_SECRET=
TRUSTED_COOKIE_SECRET=
# Timestamped HMAC shared secret for Supabase Edge callbacks and cron jobs.
HMAC_SHARED_SECRET=
# 32-byte base64 key for encrypting MFA payloads (preferred). Required.
KMS_DATA_KEY=
# Legacy variant if storing the key under an alternate name.
# KMS_DATA_KEY_BASE64=
# OpenAI API key for OCR uploads and SMS parsing fallbacks.
OPENAI_API_KEY=
# Optional override for deterministic OpenAI models.
OPENAI_OCR_MODEL=gpt-4.1-mini
OPENAI_RESPONSES_MODEL=gpt-4.1-mini
# Optional: dedicated secrets for rate limiting + email OTP hashing. Defaults fall back to BACKUP_PEPPER when unset.
# RATE_LIMIT_SECRET=
# EMAIL_OTP_PEPPER=
# Cookie TTLs (seconds) for MFA session + trusted device tokens.
MFA_SESSION_TTL_SECONDS=43200
TRUSTED_DEVICE_TTL_SECONDS=2592000
# Passkey relying party metadata. Leave blank to infer from deployment URL.
# MFA_RP_ID=
# MFA_ORIGIN=
MFA_RP_NAME=SACCO+
# Email locale + sender used when delegating to Supabase `mfa-email` edge function.
MFA_EMAIL_LOCALE=en
MFA_EMAIL_FROM=security@example.com
# Optional: webhook token expected by /api/cache/revalidate.
# ANALYTICS_CACHE_TOKEN=
# Optional: HMAC key for signed CSV exports.
# REPORT_SIGNING_KEY=
# Optional SMTP fallback when not using Supabase/Resend function.
MAIL_FROM=SACCO+ <no-reply@sacco.plus>
# SMTP_HOST=
SMTP_PORT=587
# SMTP_USER=
# SMTP_PASS=
# Observability / log drain configuration (optional).
# LOG_DRAIN_URL=
# LOG_DRAIN_TOKEN=
# LOG_DRAIN_SOURCE=
LOG_DRAIN_TIMEOUT_MS=2000
# LOG_DRAIN_ALERT_WEBHOOK=
# LOG_DRAIN_ALERT_TOKEN=
LOG_DRAIN_ALERT_COOLDOWN_MS=300000
# LOG_DRAIN_SILENT=1
# Optional automation secrets.
# EDGE_URL=
# ANALYTICS_CACHE_TOKEN=
# VERBOSE toggles.
# DISABLE_PWA=1
# ANALYZE_BUNDLE=1
# TWILIO WhatsApp/voice integration (optional).
# TWILIO_ACCOUNT_SID=
# TWILIO_AUTH_TOKEN=
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886
# Optional host overrides.
# SITE_URL=

# ------------------------------------------------------------
# Supabase Edge Function secrets (configure via Supabase dashboard)
# ------------------------------------------------------------
# Mirror of NEXT_PUBLIC_SUPABASE_URL for server-side Supabase clients.
SUPABASE_URL=
# Same value as SUPABASE_SERVICE_ROLE_KEY above.
SUPABASE_SERVICE_ROLE_KEY=
# Shared secret for webhook signature verification (must match Vercel runtime value).
HMAC_SHARED_SECRET=
# API key + sender for Resend-powered MFA emails.
RESEND_API_KEY=
MFA_EMAIL_FROM=security@example.com
MFA_EMAIL_LOCALE=en
# Optional admin API token for automation scripts (bootstrap, MFA code generation, etc.).
# ADMIN_API_TOKEN=
# Base64-encoded 32-byte key for encrypting PII fields in Supabase.
KMS_DATA_KEY_BASE64=
# Legacy alias if storing the same key under a different environment name.
# FIELD_ENCRYPTION_KEY=
# Optional: origin allowed to access scheduled reconciliation + export endpoints.
APP_ORIGIN=https://app.example.com
# Forecasting + reconciliation tunables.
FORECAST_LOOKBACK_DAYS=120
FORECAST_HORIZON_DAYS=21
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_MAX=120
RECON_AUTO_ESCALATE_HOURS=48
# SMS automation guardrails.
SMS_AUTOMATION_THRESHOLD_MINUTES=10
SMS_AUTOMATION_BATCH=25
# Structured report signing (shared with Next.js route handler if enabled).
# REPORT_SIGNING_KEY=
# OpenAI model overrides for SMS parsing helpers.
OPENAI_API_KEY=
OPENAI_RESPONSES_MODEL=gpt-4.1-mini

# ------------------------------------------------------------
# Deployment automation helpers
# ------------------------------------------------------------
# CI-only Playwright overrides (leave commented in production).
# PLAYWRIGHT_BASE_URL=http://127.0.0.1:3000
# PLAYWRIGHT_SUPABASE_URL=http://127.0.0.1:54321
# PLAYWRIGHT_SUPABASE_ANON_KEY=stub-anon-key
# PLAYWRIGHT_SUPABASE_SERVICE_ROLE_KEY=stub-service-role-key
# PLAYWRIGHT_OPENAI_API_KEY=stub-openai-key
# PLAYWRIGHT_HMAC_SHARED_SECRET=stub-hmac-secret
